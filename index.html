<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Расчёт Матрицы</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Расчёт Матрицы</h1>
  </header>

  <main>
    <label for="birthdate">Введи дату рождения (dd/mm/yyyy):</label>
    <input type="text" id="birthdate" placeholder="dd/mm/yyyy" maxlength="10" oninput="formatDateInput()">
    <button onclick="calculateMatrix()">Рассчитать</button>
  </main>

  <script>
    function formatDateInput() {
      let input = document.getElementById('birthdate');
      let value = input.value.replace(/\D/g, ''); // Убираем все нецифровые символы
      if (value.length >= 3) value = value.slice(0, 2) + '/' + value.slice(2); // Добавляем слэш после дня
      if (value.length >= 6) value = value.slice(0, 5) + '/' + value.slice(5); // Добавляем слэш после месяца
      input.value = value.slice(0, 10); // Обрезаем до 10 символов
    }

    function calculateMatrix() {
      const birthdate = document.getElementById('birthdate').value;
      const regex = /^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
      const match = birthdate.match(regex);

      if (!match) {
        alert('Пожалуйста, введите дату в формате dd/mm/yyyy');
        return;
      }

      const [_, day, month, year] = match;

      // Проверяем, что дата корректна
      if (day < 1 || day > 31 || month < 1 || month > 12 || year == 0) {
        alert('Пожалуйста, введите корректную дату');
        return;
      }

      // Пример сохранения в localStorage
      localStorage.setItem('birthdate', birthdate);

      // Пока без формул — просто делаем переход
      window.location.href = 'results.html';
    }
  </script>
</body>
</html>
